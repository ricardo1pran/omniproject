var Widgetic=function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function n(t){if(!t._start)try{i(t)}catch(e){if(t._tasks[t._ended+t._active-1])o(t,e);else if(!t._data)throw e}}function i(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,o=n[i];n[i]=r(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||N)}}function r(t,e){return function(i,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=i?o(t,i):(t._data[e]=r,t._waiting?n(t):s(t))))}}function o(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,s(t)}function s(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function a(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new e(t)}var u,c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(u=function(t){var e,n,i,r;for(n=(i=u.options).parser[i.strictMode?"strict":"loose"].exec(t),r={},e=14;e--;)r[i.key[e]]=n[e]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){if(e)return r[i.q.name][e]=n}),r[i.h.name]={},r[i.key[13]].replace(i.h.parser,function(t,e,n){if(e)return r[i.h.name][e]=n}),r}).options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},h:{name:"hashKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var l,d,h,p,f,m,y,g,v,w,_,b,k,E=u;(k=window.location).origin||(k.origin=k.protocol+"//"+k.hostname+(k.port?":"+k.port:"")),m=E,d=(null!=(v=window.widgeticOptions)?v.domain:void 0)||"widgetic.com",h=(null!=(w=window.widgeticOptions)?w.domainProtocol:void 0)||"https",f="?lo="+encodeURIComponent(k.origin);var x,T,S=l={proxy:(g=!1===(null!=(_=window.widgeticOptions)?_.secure:void 0)?"http":"https")+"://"+(p=(y=m(d)).host+(y.port?":"+y.port:""))+"/sdk/proxy.html"+f+"#proxy",popup:g+"://"+p+"/sdk/proxy.html"+f+"#popup",auth:g+"://"+d+"/oauth/v2/auth",composition:g+"://"+d+"/api/v2/compositions/{id}/embed.html"+f,widget:g+"://"+d+"/api/v2/widgets/{id}/embed.html"+f,editor:g+"://"+d+"/api/v2/editor.html"+f,plugin:g+"://"+p+"/plugin"+f,api:"/api/v2/",domain:h+"://"+p,lo:decodeURIComponent(m(k).queryKey.lo||k.origin),crossdomain:(null!=(b=window.widgeticOptions)?b.crossdomain:void 0)||!0};x="addEventListener",T="removeEventListener";var O,A,C,M={on:function(t,e,n,i){return null==i&&(i=!1),t[x]?t[x](e,n,i):t.attachEvent("on"+e,n)},off:function(t,e,n,i){return null==i&&(i=!1),t[T]?t[T](e,n,i):t.detachEvent("on"+e,n)}},q=t(function(t,e){!function(e,n){t.exports=n()}(0,function(){return function(t,e,n){e=e||"";var i=(n=n||{}).complete||function(){},r=n.success||function(){},o=n.error||function(){},s=n.headers||{},a=n.method||"GET",u=n.sync||!1,c=0===t.indexOf("http")&&"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest;if(!c)throw new Error("Browser doesn't support XHR");if("string"!=typeof e){var l=[];for(var d in e)l.push(d+"="+e[d]);e=l.join("&")}"ontimeout"in c&&(c.ontimeout=+n.timeout||0),c.onload=function(){i(c.responseText,c.status),r(c.responseText)},c.onerror=function(){i(c.responseText),o(c.responseText,c.status)},c.open(a,"GET"===a&&e?t+"?"+e:t,!u);for(var h in s)c.setRequestHeader(h,s[h]);return c.send("GET"!==a?e:null),c}})});C=q,O=S;var R=A=function(t){var e,n,i,r,o,s,a,u;if(t.id&&(e=t.a))return u=e.u,s=e.m,i=e.d,o={id:t.id,t:"e",a:{}},r={"Content-type":"application/json"},"PUT"!==(s=s.toUpperCase())&&"DELETE"!==s||(r["X-HTTP-Method-Override"]=s,s="POST"),n=function(t,e){return o.a.t=200===e||201===e||202===e||204===e?"t":"f",o.a.d=t,o=JSON.stringify(o),O.crossdomain?window.parent.postMessage(o,"*"):window.widgeticReceiver({origin:window.location.origin,data:o})},a={method:s,headers:r,complete:n},C(u,i,a)},I=[].slice,N={};e.prototype=a.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=I.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),n(this),this},abort:function(){return null==this._error&&o(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},s(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,s(this),this}};var P,z,j,W=Object.freeze({queue:a}),D=W&&void 0||W;z=D.queue(1),j={},P=function(t){return j.init=t},z.defer(P),z.steps=j;var L,H,J,B,U,K,V=z,G=L=function(){var t;return(t=function(t){var e;return e=(Math.random().toString(16)+"000000000").substr(2,8),t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e})()+t(!0)+t(!0)+t()},Q=t(function(t,e){!function(e,n){t.exports=n()}(0,function(){var t={},e=function(){var t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}},n=function(t){var e=t&&t.then;if("object"==typeof t&&"function"==typeof e)return function(){return e.apply(t,arguments)}},i=function(e,n){var i=t.defer(),o=function(t,e){setTimeout(function(){var n;try{n=t(e)}catch(t){return void i.reject(t)}n===i.promise?i.reject(new TypeError("Cannot resolve promise with itself")):i.resolve(n)},1)},s=function(t){e&&e.call?o(e,t):i.resolve(t)},a=function(t){n&&n.call?o(n,t):i.reject(t)};return{promise:i.promise,handle:function(t,e){t===r?s(e):a(e)}}},r=1;return t.defer=function(){var t,o=0,s=[],a=function(e,n){o=e,t=n,s.forEach(function(e){e.handle(o,t)}),s=null},u=function(t){a(r,t)},c=function(t){a(2,t)},l=function(e,n){var r=i(e,n);return 0===o?s.push(r):r.handle(o,t),r.promise},d=function(t){var n=e();try{t(n(h),n(c))}catch(t){n(c)(t)}},h=function(t){var e;try{e=n(t)}catch(t){return void c(t)}e?d(e):u(t)},p=e();return{resolve:p(h),reject:p(c),promise:{then:l,fail:function(t){return l(null,t)}}}},t})}),$=t(function(t){!function(e){function n(){var t={},n=Function;return{publish:function(){var n,i,r,o=arguments,s=t[o[0]];s&&(n=s.length,i=o.length>1?Array.prototype.splice.call(o,1):[],setTimeout(function(){for(r=0;r<n;r+=1)s[r].apply(e,i);s=e=i=null},0))},subscribe:function(e,i){if("string"!=typeof e)throw"invalid or missing channel";if(!(i instanceof n))throw"invalid or missing callback";return t[e]||(t[e]=[]),t[e].push(i),{channel:e,callback:i}},unsubscribe:function(e,i){if(e.channel&&e.callback&&(i=e.callback,e=e.channel),"string"!=typeof e)throw"invalid or missing channel";if(!(i instanceof n))throw"invalid or missing callback";var r,o=t[e],s=o instanceof Array?o.length:0;for(r=0;r<s;r+=1)if(o[r]===i){o.splice(r,1);break}}}}t.exports?t.exports=n():e.PubSub=n()}(c)});H=G,K=window,J={},B=function(t,e){var n,i;return n=(screen.width-t)/2,i=(screen.height-e)/2,"location=no,menubar=no,toolbar=no,scrollbars=no,status=no,resizable=no,width="+t+",height="+e+",left="+n+",top="+i};var X,F,Y=U=function(t,e){var n,i,r,o,s;return r=e.promise,null!=(o=J.win)&&o.close(),J.win=s=K.open(t,"widgetic_popup_"+H(),B(500,496)),n=function(){if(!s||s.closed)return clearInterval(i),e.reject("window closed")},i=setInterval(n,50),r.then(function(){return s.close()}),r};F={},(X=function(t,e){var n,i,r,o,s;return o=e.promise,X=document.createElement("iframe"),(r=F.root.el).appendChild(X),i=function(){return e.reject("Timeout error")},n=function(){return r.removeChild(X),clearTimeout(s)},s=setTimeout(i,1e4),o.then(n,n),X.setAttribute("src",t),o}).setRoot=function(t){return F.root=t};var Z,tt,et,nt,it,rt,ot,st,at,ut,ct,lt,dt=X;rt=S,tt=It,ct=Y,st=dt,it=Q,et={},ut={},at=[],lt=function(t,e){return null==t&&(t=[]),null==e&&(e="oauth"),rt.auth+"?client_id="+et.id+"&redirect_uri="+et.uri+"&response_type=token&scope="+t.join(" ")+"#"+e},Z=function(t,e){var n,i;return null==t&&(t=!0),n=it.defer(),i=t?ct:st,e&&(at=e),e=at,ut.deffered=n,{oa:i,scope:e,deffered:n}},ot=function(t,e,n){return et.id&&et.uri?t(e,n):(n.reject("Widgetic must be initialized with client id and redirect uri!"),n.promise)},(nt=function(){var t,e,n,i;return n=Z.apply(null,arguments),e=n.oa,i=n.scope,t=n.deffered,ot(e,lt(i),t)}).register=function(t){var e,n,i;return i=Z(!0,t),n=i.oa,t=i.scope,e=i.deffered,ot(n,lt(t,"signup"),e)},nt.setAuthOptions=function(t,e,n){return et.id=t,et.uri=e},nt.getClientId=function(){return et.id},nt.retry=function(t){return nt.apply(this,t.d)},nt.connect=function(t){var e;return(e=t.d)&&e.access_token?(tt.setTokens(e),ut.deffered.resolve(tt.getStatus()),setTimeout(nt.bind(this,!1),1e3*e.expires_in-1500)):ut.deffered.reject(tt.getStatus())};var ht,pt,ft,mt,yt,gt,vt,wt,_t,bt,kt,Et,xt,Tt=nt;ft=S,bt=R,_t=V,yt=G,pt=Q,wt=$,mt={},gt={},xt=null,Et=null,vt=function(t,e,n,i){var r,o;return t=ft.api+t,r=(null!=(o=gt.tokens)?o.access_token:void 0)||!1,(e||(e="GET"))instanceof Object&&(n=e,e="GET"),"GET"!==e?t+=r?"?access_token="+r:"":(n||(n={}),r&&(n.access_token=r)),JSON.stringify({t:"a",id:i,a:{u:t,m:e,d:n}})},(ht=function(t,e,n){var i,r,o,s,a;return o=yt(),a=(mt[o]=r=pt.defer()).promise,s=vt.apply(this,r.margs=[t,e,n,o]),i=function(){return mt[o]=null},a.then(i,i),gt.proxy(s),a}).response=function(t){var e,n,i,r,o,s;if(i=mt[t.id],e=t.a,""!==(n=e.d))try{n=JSON.parse(n)}catch(t){return void i.reject(new Error("JSON Parse error!"))}return"t"===e.t?i.resolve(n):gt.tokens&&n.error&&("invalid_grant"===(s=n.error)||"access_denied"===s)?(o=function(){return xt=null,gt.proxy(vt.apply(this,i.margs))},kt().then(o,function(){return xt=null,i.reject(new Error("Unable to login again!"))})):(r=new Error(n.error_description||n.message||"Unknown Error"),r.errors=n.errors,r.code=n.code,i.reject(r))},kt=function(){var t,e,n;return null!=(t=Tt).getClientId()?t(!1):(n=(xt=pt.defer()).promise,e=JSON.stringify({t:"r",d:[!1]}),window.parent.postMessage(e,ft.lo),Et=setTimeout(xt.reject,3e3),n)},ht.setProxy=function(t){return gt.proxy=t},ht.setTokens=function(t){return gt.tokens=t,wt.publish("api/token/update")},ht.getStatus=function(){var t;return(null!=(t=gt.tokens)?t.access_token:void 0)?{status:"connected",accessToken:gt.tokens.access_token,refreshToken:gt.tokens.refresh_token,expiresIn:gt.tokens.expires_in,scope:gt.tokens.scope}:{status:"disconnected"}},ht.accessToken=function(t){var e;return t&&(clearTimeout(Et),null!=xt&&xt.resolve(t),ht.setTokens({access_token:t,refresh_token:void 0,expires_in:void 0,scope:void 0})),null!=(e=gt.tokens)?e.access_token:void 0},ht.disconnect=function(){return wt.publish("api/token/update"),gt.tokens=null},ht.queue=_t,ht.request=bt;var St,Ot,At,Ct,Mt,qt,Rt,It=ht;Ct="#widgetic-root{position:absolute;top:-1000px;left:-1000px;width:0px;height:0px;visibility:hidden;z-index:-1} #widgetic-root iframe{width:0px;height:0px} iframe.widgetic-composition {border: none;width: 100%;height: 100%;} iframe.widgetic-editor {width: 490px; height: 565px; border:none;overflow:hidden} .wdgtc-wrap{overflow: hidden}",At=S,Mt=dt,Rt=(Ot=It).queue.steps,St=function(){return document.getElementsByTagName("body")[0].appendChild(this.el=document.createElement("div")),this.el.id="widgetic-root",Mt.setRoot(this),this},qt=Q.defer(),St.prototype.createProxy=function(){var t,e,n;return Rt.init&&(At.crossdomain?(e=document.createElement("iframe"),this.el.appendChild(e),t=function(){return St._done=null,clearTimeout(n),qt.reject(new Error("Could not initialize cross-domain messaging iframe"))},n=setTimeout(t,1e4),St._done=function(){return Ot.setProxy(function(t){return e.contentWindow.postMessage(t,At.domain)}),clearTimeout(n),Rt.init(),St._done=Rt.init=null,qt.resolve()},e.setAttribute("src",At.proxy)):(Ot.setProxy(function(t){return window.widgeticReceiver({origin:window.location.origin,data:t})}),Rt.init(),St._done=Rt.init=null,qt.resolve())),qt.promise},St.connect=function(){return"function"==typeof St._done?St._done():void 0},St.style=function(){var t;return document.getElementsByTagName("head")[0].appendChild(t=document.createElement("style")),t.textContent=Ct};var Nt,Pt,zt,jt,Wt=St;Nt=S,zt=E,jt=window,(Pt=function(t){var e,n,i,r,o,s,a,u,c,l;if((!jt.parent||jt.parent!==jt||jt.opener)&&(a=zt(t),n=a.hash,i=a.hashKey,u=a.queryKey,s="proxy"===n,o=i.hasOwnProperty("popup"),(r=i.hasOwnProperty("oauth")||i.access_token)||s||o))return r&&(l="o"),s&&(l="i"),o&&(l="p"),e=n?i:u,c=r?jt.location.origin:Nt.lo,(jt.opener||jt.parent).postMessage(JSON.stringify({d:e,t:l}),c)}).parse=zt;var Dt,Lt,Ht,Jt,Bt,Ut,Kt,Vt,Gt,Qt,$t,Xt,Ft=Pt,Yt=Dt=function(t){var e;{if("interactive"!==(e=document.readyState)&&"complete"!==e)return document.addEventListener("DOMContentLoaded",t);t()}},Zt=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},te=[].slice;Ut=S,Vt=G,$t=D.queue,Ht=It,Jt=Tt,Bt={},Xt=["click","dblclick","mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","wheel","keydown","keyup","keypress"],(Lt=function(t,e,n){var i,r,o,s,a,u,c;if(null==n&&(n={}),"string"==typeof e&&(r=e),s=r?n:e,null==r&&(r=s.composition),this._queue=$t(1),this._queue.defer(function(t){return function(e){return t._startQueue=e}}(this)),this._callbacks={},r?c=Ut.composition.replace("{id}",r):(c=Ut.widget.replace("{id}",s.widget_id),null!=s.id&&(c+="#comp="+s.id),s.skin&&this.setSkin(s.skin),s.content&&this.setContent(s.content)),a=[],i=Jt.getClientId(),o="connected"===Ht.getStatus().status,null!=s.widget_id&&!i&&!o)throw new Error("Widgetic should be initialized before using the UI.Composition!");return(u=s.token||Ht.accessToken())&&a.push("access_token="+u),i&&a.push("client_id="+i),s.wait_editor_init&&a.push("wait"),s.branding&&a.push("branding"),s.brand_pos&&a.push("bp="+s.brand_pos),s.edit_mode&&a.push("edit_mode"),s.resize&&a.push("resize="+s.resize),s.autoscale&&a.push("autoscale="+s.autoscale),a.length&&(c=c.replace(/(\?)|((.)(\#)|($))/,"?"+(a.length?a.join("&"):void 0)+"&$2")),this.id=Vt(),Bt[this.id]=this,this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","widgetic-composition"),this._iframe.setAttribute("name",this.id),this._iframe.setAttribute("allowfullscreen",!0),this._iframe.setAttribute("scrolling","no"),t.appendChild(this._iframe),this._iframe.setAttribute("src",c),0===this._iframe.parentElement.parentElement.className.indexOf("wdgtc-wrap")&&(this._responsiveWrapper=this._iframe.parentElement.parentElement),this._autoscale="off"!==s.autoscale,this._readyDeferred=Widgetic.Aye.defer(),this.ready=this._readyDeferred.promise,this}).prototype.updateSize=function(t,e){if(this._autoscale)return e&&(e=parseInt(e,10),this._responsiveWrapper&&(this._responsiveWrapper.style.height=e+"px",this._responsiveWrapper.querySelector(".wdgtc-holder").style["padding-top"]=0),this._iframe.style.height=e+"px"),t?this._iframe.setAttribute("width",t):void 0},Lt.prototype.close=function(){return Bt[this.id]=null,this._iframe.parentNode.removeChild(this._iframe),this.off(),this},Lt.prototype.queue=function(t){return this._queue.defer(function(e){return t(),e()})},Lt.prototype._apiReady=function(){return this._startQueue()},Lt.prototype._ready=function(){return this._readyDeferred.resolve()},Lt.prototype._sendMessage=function(t){return this._queue.defer(function(e){return function(n){return e._iframe.contentWindow.postMessage(JSON.stringify(t),"*"),n()}}(this)),this},Lt.prototype.on=function(t,e){var n,i,r,o,s;for(Zt.call(Xt,t)>=0&&this._sendMessage({t:"re",d:t}),i=t.split(" "),n=this.hasOwnProperty("_callbacks")&&this._callbacks,r=0,o=i.length;r<o;r++)n[s=i[r]]||(n[s]=[]),n[s].push(e);return this},Lt.prototype.off=function(t,e){var n,i,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(n=t.split(" ")).length;r<s;r++)if(c=n[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(i=o=0,a=u.length;o<a;i=++o)if(u[i]===e){(u=u.slice()).splice(i,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},Lt.prototype._trigger=function(){var t,e,n,i,r,o;if(t=1<=arguments.length?te.call(arguments,0):[],(e=t.shift())===Lt.RELAY&&(e=t[0].type),r=this.hasOwnProperty("_callbacks")&&(null!=(o=this._callbacks)?o[e]:void 0)){for(n=0,i=r.length;n<i&&!1!==r[n].apply(this,t);n++);return!0}},Qt={clearContent:"cx",setContent:"sc",addContent:"ac",changeContent:"cc",removeContent:"rc",setSkin:"ss",changeSkin:"cs",addSheet:"asht",addCss:"acss"},Kt=function(t,e){return Lt.prototype[t]=function(t){return this._sendMessage({t:e,d:t})}};for(Gt in Qt)Kt(Gt,Qt[Gt]);Lt.apiReady=function(t){var e;return null!=(e=Bt[t.d])?e._apiReady():void 0},Lt.connect=function(t){var e;return null!=(e=Bt[t.d])?e._ready():void 0},Lt.event=function(t){return Bt[t.id]._trigger(t.e,t.d)},Lt.updateSize=function(t){return Bt[t.id].updateSize(t.d.width,t.d.height)},Lt.RELAY="r",Lt.EMBED_MODE=1,Lt.EDIT_MODE=2;var ee,ne,ie,re,oe,se,ae,ue,ce=Lt,le=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},de=[].slice;ie=S,ae=D.queue,se=$,oe=G,ne=It,re={},ue=["click","dblclick","mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","wheel","keydown","keyup","keypress"],(ee=function(t,e,n){var i;return this.composition=e,this._queue=ae(1),this._queue.defer(function(t){return function(e){return t._startQueue=e}}(this)),this._callbacks={},se.subscribe("api/token/update",this._updateToken.bind(this)),this._updateToken(),n&&this.setEditorOptions(n),this.composition.ready.then(this._compReady.bind(this)),re[this.composition.id]=this,i=ie.editor+"#"+this.composition.id,(null!=n?n.asPopup:void 0)?(this.frame=t)?this.frame.location.href=i:this.frame=window.open(i,oe(),"height="+(n.h||565)+",width="+(n.w||490)):(this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","widgetic-editor"),this._iframe.setAttribute("name",oe()),t.appendChild(this._iframe),this._iframe.setAttribute("src",i),this.frame=this._iframe.contentWindow),this}).prototype.close=function(){return re[this.composition.id]=null,this._iframe?this._iframe.parentNode.removeChild(this._iframe):this.frame.close(),this},ee.prototype.goTo=function(t){return this._sendMessage({t:"step",d:t}),this},ee.prototype.setEditorOptions=function(t){return this.options=null!=t?t:this.options,this._sendMessage({t:"opts",d:this.options}),this},ee.prototype.addContent=function(t){return this._sendMessage({t:"cont",d:t}),this},ee.prototype.save=function(){return this.goTo("done"),this},ee.prototype.on=function(t,e){var n,i,r,o,s;for(le.call(ue,t)>=0&&this._sendMessage({t:"ree",d:t}),i=t.split(" "),n=this.hasOwnProperty("_callbacks")&&this._callbacks,r=0,o=i.length;r<o;r++)n[s=i[r]]||(n[s]=[]),n[s].push(e);return this},ee.prototype.off=function(t,e){var n,i,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(n=t.split(" ")).length;r<s;r++)if(c=n[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(i=o=0,a=u.length;o<a;i=++o)if(u[i]===e){(u=u.slice()).splice(i,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},ee.prototype._trigger=function(){var t,e,n,i,r,o;if(t=1<=arguments.length?de.call(arguments,0):[],(e=t.shift())===ee.RELAY&&(e=t[0].type),r=this.hasOwnProperty("_callbacks")&&(null!=(o=this._callbacks)?o[e]:void 0)){for(n=0,i=r.length;n<i&&!1!==r[n].apply(this,t);n++);return!0}},ee.prototype._sendMessage=function(t){return this._queue.defer(function(e){return function(n){return e.frame.postMessage(JSON.stringify(t),"*"),n()}}(this))},ee.prototype._ready=function(){return this.ready=!0,this._startQueue()},ee.prototype._compReady=function(){return this.compReady=!0,this._sendMessage({t:"ready"})},ee.prototype._updateToken=function(){return this._sendMessage({t:"token",d:ne.accessToken()})},ee.prototype._onConnect=function(){return this.ready&&this.compReady&&this._queue.defer(function(t){return function(e){return t.setEditorOptions(),t._compReady(),e()}}(this)),this._ready()},ee.connect=function(t){return re[t.id]._onConnect()},ee.event=function(t){return re[t.id]._trigger(t.e,t.d)},ee.RELAY="er";var he,pe,fe,me,ye,ge,ve=ee,we=[].slice;fe=S,ge=D.queue,ye=$,me=G,pe=It;var _e,be,ke,Ee,xe,Te,Se,Oe,Ae,Ce,Me,qe,Re,Ie,Ne,Pe,ze,je,We,De=he=function(){function t(t){var e,n;this.id=me(),this.name=t.name||this.id,this._queue=ge(1),this._queue.defer(function(t){return function(e){return t._startQueue=e}}(this)),ye.subscribe("api/token/update",this._updateToken.bind(this)),this._updateToken(),t&&this.setOptions(t),n=fe.plugin,(this.frame=(null!=(e=t.holder)?e.document:void 0)||t.holder)?(this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","wdtc-plugin"),this._iframe.setAttribute("name",this.name),this.frame.appendChild(this._iframe),this._iframe.setAttribute("src",n),this.frame=this._iframe.contentWindow):this.frame=window.open(n,this.name,"height="+(t.h||760)+",width="+(t.w||1270))}return t.instances={},t.connect=function(e){var n;return(n=t.instances[e.id])._updateToken(),n._ready(),n._sendMessage({t:"ready"})},t.event=function(e){return t.instances[e.id]._trigger(e.e,e.d)},t.create=function(t){var e;return null==t&&(t={}),e=new this(t),this.instances[e.id]=e},t.prototype.close=function(){return this.constructor.instances[this.id]=null,delete this.constructor.instances[this.id],this._iframe?this._iframe.parentNode.removeChild(this._iframe):this.frame.close(),this},t.prototype.setOptions=function(t){return this.options=null!=t?t:this.options,this._sendMessage({t:"opts",d:this.options}),this},t.prototype.addEditorContent=function(t){return this._sendMessage({t:"econt",d:t}),this},t.prototype.on=function(t,e){var n,i,r,o,s;for(i=t.split(" "),n=this.hasOwnProperty("_callbacks")&&(this._callbacks||(this._callbacks={})),r=0,o=i.length;r<o;r++)n[s=i[r]]||(n[s]=[]),n[s].push(e);return this},t.prototype.off=function(t,e){var n,i,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(n=t.split(" ")).length;r<s;r++)if(c=n[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(i=o=0,a=u.length;o<a;i=++o)if(u[i]===e){(u=u.slice()).splice(i,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},t.prototype._trigger=function(){var t,e,n,i,r,o;if(t=1<=arguments.length?we.call(arguments,0):[],e=t.shift(),r=this.hasOwnProperty("_callbacks")&&(null!=(o=this._callbacks)?o[e]:void 0)){for(n=0,i=r.length;n<i&&!1!==r[n].apply(this,t);n++);return!0}},t.prototype._sendMessage=function(t){return this._queue.defer(function(e){return function(n){return e.frame.postMessage(JSON.stringify(t),"*"),n()}}(this))},t.prototype._ready=function(){return this._startQueue()},t.prototype._updateToken=function(){return this._sendMessage({t:"token",d:pe.accessToken()})},t}(),Le=function(t,e){return function(){return t.apply(e,arguments)}};Ee=Q,Re=G,Ae=M,Te=S,Ce=function(t){var e,n,i,r;for(null==t&&(t={}),n=0,r=arguments.length;n<r;n++)if(e=arguments[n])for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},Se=function(t,e){var n;return null==e&&(e=10),n=null,function(){return clearTimeout(n),n=setTimeout(t,e)}},Me=function(t){var e;return e=t.getBoundingClientRect(),{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},Ie=function(t,e,n){var i;return(i=this.document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("charset","utf-8"),i.setAttribute("href",t),n&&(Ae.on(i,"load",n),Ae.on(i,"error",n)),e.appendChild(i)},Ne=function(t,e,n,i){var r,o,s,a,u,c,l,d;for(null==e&&(e=[]),null==n&&(n=[]),r=[].concat(e,n),l=r.length,a=0,d=!0,u=function(t){if("load"===t.type||n.indexOf(t.target.href)>-1?++a:console.log(new Error('Popup stylesheet "'+t.target.href+'" did not load!')),a===l||!d)return i()},o=0,s=r.length;o<s;o++)c=r[o],Ie.call(this,c,t,u);return setTimeout(i,5e3),setTimeout(function(){return d=!1},5e3)},Oe={},Pe=function(t){var e,n,i;return e=Re(),i=(Oe[e]=Ee.defer()).promise,n={id:e,t:"p",d:t},{promise:i,message:n}},ke=function(t,e){return Oe[t.id].resolve(e)},je=function(t,e){return null==e&&(e=window.parent),"string"==typeof e&&(e=window.frames[e]),e.postMessage(JSON.stringify(t),"*")},ze=function(t,e,n){return t.d.original=t.d.event,t.d.event="done",t.d.response=n,je(t,e.source)},We=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},qe=function(t){try{return t.innerHTML}catch(e){return t.styleSheet.cssText}},xe=function(t){return t?{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}:{}},be=function(t){var e;return{popup:xe(t.getBoundingClientRect()),widget:xe(null!=(e=t._parentFrame)?e.getBoundingClientRect():void 0)}},_e=function(){function t(t){this._prepare=Le(this._prepare,this),this._saveInfo=Le(this._saveInfo,this),this.position=Le(this.position,this),this._hide=Le(this._hide,this),this.resize=Le(this.resize,this);var e,n,i;this.options=t,n=this.options;for(e in n)i=n[e],this[e]=i;null==this.anchor&&(this.anchor=document.body),this.anchor.jquery&&(this.anchor=this.anchor[0]),this.dimensions={width:0,height:0},this.info={},this.visible=!1,this._callbacks={}}return t.styles={popup:"body { display:inline-block; margin:0; width:auto !important; height:auto !important; overflow:hidden; background:transparent !important } #loader { width: 250px; height: 250px; border: 1px solid #d5d5d5; background: white; } .sk-three-bounce { margin: 115px auto; width: 40px; text-align: center; } .sk-three-bounce .sk-child { width: 10px; height: 10px; background-color: #262424; border-radius: 100%; display: inline-block; -webkit-animation: sk-three-bounce 1.4s ease-in-out 0s infinite both; animation: sk-three-bounce 1.4s ease-in-out 0s infinite both; } .sk-three-bounce .sk-bounce1 { -webkit-animation-delay: -0.32s; animation-delay: -0.32s; } .sk-three-bounce .sk-bounce2 { -webkit-animation-delay: -0.16s; animation-delay: -0.16s; } @-webkit-keyframes sk-three-bounce { 0%, 80%, 100% { -webkit-transform: scale(0); transform: scale(0); } 40% { -webkit-transform: scale(1); transform: scale(1); } } @keyframes sk-three-bounce { 0%, 80%, 100% { -webkit-transform: scale(0); transform: scale(0); } 40% { -webkit-transform: scale(1); transform: scale(1); } }",overlay:"html, body { width:100%; height:100%; } body { display:block; margin:0; overflow:hidden; }"},t.popups={},t.callbacks={},t.iframes={},t.new=function(e){var n;return null==e&&(e={}),n=e.name||Re(),e.name=n,this.popups[n]=new t(e),this.popups[n].init()},t.receiver=function(e,n){var i;return i=e.d.event,i="on"+We(i),"function"==typeof t[i]?t[i](e,n):void 0},t.onCreate=function(t,e){var n,i;return i=t.d.name,(n=document.createElement("iframe")).setAttribute("class","wdgtc-popup"),n.setAttribute("name",i),n.isOverlay="overlay"===t.d.type,n.setAttribute("style","border: 0; width: 0; height: 0; position: absolute; top: 0; left: -10000px; z-index: 2147483646;"),n.isOverlay&&(n.style.zIndex=2147483647),n.isVisible=!1,n._parent=e.source,n._parentFrame=document.getElementsByName(t.d.source)[0],document.querySelectorAll("body")[0].appendChild(n),n.setAttribute("src",Te.popup+"&name="+encodeURIComponent(i)+"&event=ready"),this.iframes[i]=n,n.doPosition=function(t){return function(){var e;return t.doPosition(n,null),e={t:"p",d:{event:"reposition",name:i,response:{info:be(n)}}},je(e,n._parent)}}(this),n.doPosition=Se(n.doPosition),Ae.on(window,"resize",n.doPosition),Ae.on(window,"scroll",n.doPosition),this.callbacks[i]=function(n){return function(){return delete n.callbacks[i],ze(t,e)}}(this)},t.onReady=function(t){var e,n;return"function"==typeof(e=this.callbacks)[n=t.d.name]?e[n]():void 0},t.onDone=function(t,e){var n;return n=t.d.original,n="on"+We(n)+"Done",this[n]?this[n](t,e):ke(t,t.d.response)},t.onCreateDone=function(t,e){var n,i;if(i=e.source,!(n=i.frames[t.d.name]))for(;i!==e.source.top;){i=i.parent;try{if(n=i.frames[t.d.name])break}catch(t){}}return ke(t,n)},t.onReposition=function(t,e){return this.popups[t.d.name].info=t.d.response.info,this.popups[t.d.name].trigger("reposition")},t.onManage=function(t,e){var n,i,r,o;return r=t.d.name,n=this.iframes[r],i="do"+We(t.d.do),o=("function"==typeof this[i]?this[i](n,t.d):void 0)||{},o.info=be(n),ze(t,e,o)},t.doResize=function(t,e){return t.isOverlay?e.dimensions:(t.style.width=e.dimensions.width+"px",t.style.height=e.dimensions.height+"px",e.dimensions.shadow&&(t.style.boxShadow=e.dimensions.shadow),e.dimensions.borderRadius&&(t.style.borderRadius=e.dimensions.borderRadius),e.dimensions)},t.doHide=function(t,e){t.isVisible=!1,t.style.display="none"},t.doShow=function(t,e){t.isVisible=!0,t.style.display="block",t.style.position=t.isOverlay?"fixed":"absolute"},t.doPosition=function(t,e){var n,i,r,o,s,a,u;if(t.isVisible||(t.style.display="none"),t.isOverlay)return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top=0,t.style.left=0,t.style.bottom=0,void(t.style.right=0);if(e)t.positionOptions=e;else{if(!t.positionOptions)return;e=t.positionOptions}o=e.offset,s=e.dimensions,n=Ce({},e.anchor),(i=document.querySelector('iframe[name="'+n.parent+'"]'))&&(u=(a=Me(i)).top,r=a.left,n.top+=u,n.left+=r),r=window.innerWidth+document.body.scrollLeft-(n.left+s.width+o.rightMargin+o.leftOffset),r=Math.max(0,n.left+o.leftOffset+Math.min(0,r)),(u=(u=window.innerHeight+document.body.scrollTop-(n.top+n.height+s.height+o.bottomMargin))>=0?n.top+n.height+o.topOffset:n.top-s.height-o.bottomMargin)<0&&(u=n.top+n.height+o.topOffset),t.style.top=u+"px",t.style.left=r+"px"},t.doRelease=function(t,e){var n;t.parentNode.removeChild(t),Ae.off(window,"resize",t.doPosition),Ae.off(window,"scroll",t.doPosition),n=e.name,delete this.iframes[n]},t.hideAll=function(){var e,n;return function(){var i,r;i=t.iframes,r=[];for(e in i)n=i[e],r.push(n);return r}().filter(function(t){return t.isVisible}).map(function(e){return t.doHide(e),je({t:"p",d:{event:"hide",name:e.name}},e._parent)})},t.onHide=function(t,e){return this.popups[t.d.name]._hide()},t.prototype.type="popup",t.prototype.topOffset=0,t.prototype.leftOffset=0,t.prototype.rightMargin=15,t.prototype.bottomMargin=15,t.prototype.copyStyles=!0,t.prototype.on=function(t,e){return this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(e)},t.prototype.off=function(t){return t?this._callbacks[t]=[]:this._callbacks={}},t.prototype.trigger=function(t,e){var n,i,r,o,s;if(this._callbacks[t]){for(s=[],i=0,r=(o=this._callbacks[t]).length;i<r;i++)n=o[i],s.push(n(e));return s}},t.prototype.init=function(){return this._sendEvent("create",{type:this.type,source:window.name}).then(this._prepare)},t.prototype.append=function(t){return t.jquery&&(t=t[0]),this.content.innerHTML="",this.content.appendChild(t),this.resize()},t.prototype.style=function(t,e){var n;null==e&&(e=!1),this.styleElement||(this.styleElement=document.createElement("style"),this.head.appendChild(this.styleElement)),null==this.preservedStyles&&(this.preservedStyles="");try{this.styleElement.innerHTML=this.preservedStyles+t}catch(e){this.styleElement.styleSheet.cssText=this.preservedStyles+t}return e&&(this.preservedStyles+=t),(n=Ee.defer()).resolve(this.preservedStyles+t),n.promise},t.prototype.resize=function(){return this.dimensions={width:this.document.body.offsetWidth,height:this.document.body.offsetHeight},this._sendEvent("manage",{do:"resize",dimensions:this.dimensions}).then(this._saveInfo)},t.prototype.hide=function(){return this._sendEvent("manage",{do:"hide"}).then(this._saveInfo).then(this._hide)},t.prototype._hide=function(){return this.visible=!1},t.prototype.show=function(){return this.position().then(function(t){return function(){return t._sendEvent("manage",{do:"show"})}}(this)).then(this._saveInfo).then(function(t){return function(){return t.visible=!0}}(this))},t.prototype.position=function(){var t,e;return e={topOffset:this.topOffset,leftOffset:this.leftOffset,bottomMargin:this.bottomMargin,rightMargin:this.rightMargin},t=Me(this.anchor),t.parent=window.name,t.width=parseInt(this.anchor.offsetWidth,10),t.height=parseInt(this.anchor.offsetHeight,10),this._sendEvent("manage",{do:"position",anchor:t,dimensions:this.dimensions,offset:e}).then(this._saveInfo)},t.prototype.release=function(){var t,e;return t=Ee.defer(),e=t.promise,this.document.location.reload(),setTimeout(t.resolve,1e3),e.then(function(t){return function(){return t._sendEvent("manage",{do:"release"})}}(this))},t.prototype._saveInfo=function(t){return this.info=t.info,t},t.prototype._sendEvent=function(t,e){var n,i,r,o;return n={name:this.name,event:t},n=Ce(n,e),o=Pe(n),r=o.promise,i=o.message,je(i,this.targetWindow),r},t.prototype._prepare=function(e){var n,i;return this.window=e,this.document=this.window.document,this.head=this.document.head,this.loader=document.createElement("div"),this.loader.id="loader",this.loader.style.display="none",this.loader.innerHTML='<div class="sk-three-bounce"> <div class="sk-child sk-bounce1"></div> <div class="sk-child sk-bounce2"></div> <div class="sk-child sk-bounce3"></div> </div>',this.document.body.appendChild(this.loader),this.content=document.createElement("div"),this.document.body.appendChild(this.content),i='<style type="text/css">'+t.styles[this.type]+"</style>",this.head.insertAdjacentHTML("beforeend",i),i=document.querySelectorAll("[data-widget-style=true]"),i=Array.prototype.map.call(i,qe),i=i.reduce(function(t,e){return t+=e},""),this.style(i,!0),n=document.querySelectorAll('link[rel="stylesheet"]'),n=Array.prototype.map.call(n,function(t){return t.href}),(this.css||n.length)&&(this.loader.style.display="block",this.content.style.display="none",Ne.call(this,this.head,this.css,n,function(t){return function(){return t.loader.style.display="none",t.content.style.display="block",t.resize().then(function(){return t.position()}).then(function(){return t})}}(this))),this},t}(),Ae.on(window.document,"click",_e.hideAll);var He,Je,Be,Ue,Ke,Ve,Ge,Qe,$e=_e;Qe=Yt,Ke=function(t){var e,n,i;return e=t.children[0],i=t.parentNode,t.removeChild(e),(n=document.createDocumentFragment()).insertBefore(e,null),i.insertBefore(n,t),i.removeChild(t),e},Je=function(t){return t.children[0]},Ve=function(t,e,n,i){var r;return r=e?"display:inline-block;vertical-align:middle;":"",i?'<div style="width:100%;'+r+(n.wrapStyle||"")+'"><div style="position:relative; padding: 0;'+(n.holdStyle||"")+'">$$$</div></div>':'<div class="wdgtc-wrap" data-wdgtc-id="'+t+'" style="width:100%;'+r+(n.wrapStyle||"")+'"> <div class="wdgtc-holder" style="position:relative; padding: 0;'+(n.holdStyle||"")+'"> </div> </div>'},Ge={fixed:function(t,e){var n;return n=100*e/t,{wrapStyle:"max-width: "+t+"px; min-width: "+t+"px;",holdStyle:"padding-top: "+n+"%;"}},"allow-scale-down":function(t,e){var n;return n=100*e/t,{wrapStyle:"max-width: "+t+"px;",holdStyle:"padding-top: "+n+"%;"}},"fixed-height":function(t,e){return{holdStyle:"height: "+e+"px; padding-top: 0;"}},"fill-width":function(t,e){var n;return n=100*e/t,{holdStyle:"padding-top: "+n+"%;"}},fill:function(t,e){return{wrapStyle:"height: 100%",holdStyle:"height: 100%;min-height:"+e+"px"}}},Ue=function(){var t,e,n,i,r,o,s,a,u,c,l,d,h,p;for(d=/\[widgetic\-([-\w]+) *((?: [-\w]+(?:=.*?)?)+)\]/gi,n=/\s+/g,h=function(t,e,i){var r;return r=i.trim().replace(n," ").split(" ").map(function(t){return"data-"+t}).join(" "),'<a href="https://widgetic.com/widget/'+e+'/" class="widgetic-composition" '+r+"></a>"},l=[],i=0,r=(u=document.querySelectorAll("body, body *")).length;i<r;i++)"HEAD"!==(c=(a=u[i]).nodeName)&&"META"!==c&&"LINK"!==c&&"SCRIPT"!==c&&"TITLE"!==c&&(t=a.childNodes,l.push(function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)3===(e=t[n]).nodeType&&(p=e.nodeValue,s=p.replace(d,h),p!==s?((o=document.createElement("div")).innerHTML=s,r.push(a.replaceChild(o,e))):r.push(void 0));return r}()));return l},(Be=function(){return Qe(function(){var t,e,n,i;for(Ue(),n=0,i=(t=document.querySelectorAll(".widgetic-composition")).length;n<i;n++)e=t[n],He(e)})}).wrapperHtml=function(t,e){var n;return null==e&&(e=!1),n=Ge[t.resize](t.width,t.height),Ve(t.composition,t.inline,n,e)},Be.iframeStyle="position:absolute;top:0;left:0;width:0;height:0;max-width:100%;min-height:100%;min-width:100%",He=function(t){var e,n,i;if((i={composition:t.getAttribute("data-id"),width:t.getAttribute("data-width")||300,height:t.getAttribute("data-height")||200,resize:t.getAttribute("data-resize")||"allow-scale-down",brand_pos:t.getAttribute("data-brand")||"bottom-right",branding:t.hasAttribute("data-branding"),inline:t.hasAttribute("data-inline"),autoscale:t.getAttribute("data-autoscale")||"on"}).composition)return Ge[i.resize]||(i.resize="allow-scale-down"),t.insertAdjacentHTML("afterbegin",Be.wrapperHtml(i)),t=Ke(t),n=Je(t),(e=new Widgetic.UI.composition(n,i.composition,i))._iframe.setAttribute("style",Be.iframeStyle),e._iframe.style.visibility="hidden",e._iframe.onload=function(){return e._iframe.style.visibility="visible"}};var Xe,Fe,Ye,Ze,tn,en,nn,rn,on,sn,an,un,cn,ln,dn,hn,pn,fn,mn,yn,gn,vn={COMPOSITION_SAVED:"save",SKIN_SAVED:"skin-save"};an=S,tn=Wt,rn=It,on=Tt,un=Ft,cn=M,yn=Yt,Ye=ce,Ze=ve,en={Composition:Xe=ce,Editor:Fe=ve,composition:function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(Xe,arguments,function(){})},editor:function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(Fe,arguments,function(){})},parse:Be,popup:$e,plugin:De},sn=Q,gn=window,ln=!1,mn={a:rn.request,e:rn.response,i:tn.connect,o:on.connect,d:Ye.apiReady,u:Ye.connect,ce:Ye.event,w:Ze.connect,ee:Ze.event,p:en.popup.receiver,r:on.retry,v:en.plugin.connect,ve:en.plugin.event,su:Ye.updateSize},hn=an.lo.replace(/(http|https)\:/,"")+"|"+an.domain.replace(/(http|https)\:/,""),hn=hn.replace(/\./g,"\\."),hn=new RegExp(hn),window.widgeticReceiver=fn=function(t){var e,n,i;if(hn.test(t.origin)){e=t.data;try{if("string"!=typeof e)return;e=JSON.parse(e)}catch(t){return n=t,void console.warn("Widgetic SDK: error parsing JSON:",e)}try{return"function"==typeof mn[i=e.t]?mn[i](e,t):void 0}catch(t){return n=t,console.error("Widgetic SDK: ",n.stack)}}},nn=function(){return"function"==typeof gn.WidgeticAsyncInit&&gn.WidgeticAsyncInit(),cn.on(gn,"message",fn),un(gn.location.href),tn.style(),setTimeout(en.parse)},pn=sn.defer(),dn=function(){var t;return ln||(t=function(t){return function(){return(t.root=new tn).createProxy().then(function(){return pn.resolve()}).fail(function(t){return pn.reject(t)}),ln=!0}}(this),document.getElementsByTagName("body")[0]?t():yn(t)),pn.promise},nn.prototype.init=function(t,e){return dn.call(this),t&&e?(on.setAuthOptions(t,e),this):this},nn.prototype.api=function(){var t;return t=arguments,dn.call(this).then(function(){return rn.apply(this,t)})},nn.prototype.auth=function(){return on.apply(this,arguments)},nn.prototype.auth.register=function(){return on.register.apply(this,arguments)},nn.prototype.auth.status=function(){return rn.getStatus.apply(this,arguments)},nn.prototype.auth.token=function(){return rn.accessToken.apply(this,arguments)},nn.prototype.auth.disconnect=function(){return rn.disconnect.apply(this,arguments)},nn.prototype.JSON=JSON,nn.prototype.Queue=rn.queue,nn.prototype.Aye=Q,nn.prototype.Event=cn,nn.prototype.GUID=G,nn.prototype.pubsub=$,nn.prototype.UI=en,nn.prototype.EVENTS=vn,nn.prototype.version="1.1.5",nn.prototype.parse=un.parse,nn.prototype.uxhr=q,nn.prototype.debug={timestamp:function(){return console.warn("Widgetic.debug.timestamp is deprecated.")}};var wn=nn;return t(function(t){var e,n;e=wn,window.Widgetic?t.exports=window.Widgetic:(n=new e,t.exports=n,window.Blogvio=n)})}();